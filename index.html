<!DOCTYPE html>
<html>
<head>
  <title>Content Performance Policy</title>
  <meta charset='utf-8'>
  <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'>
  </script>
  <script class='remove'>
  var respecConfig = {
    specStatus: "unofficial",
    useExperimentalStyles: true,
    edDraftURI: "http://yoavweiss.github.io/ContentPerformancePolicy/",
    editors: [{
      name: "Yoav Weiss",
      url: "https://blog.yoav.ws/",
      mailto: "yoav@yoav.ws",
      company: "Akamai",
      companyURL: "https://akamai.com/"
    }, ],
    format: "markdown",
    otherLinks: [{
      key: 'Repository',
      data: [{
        value: 'We are on Github.',
        href: 'https://github.com/yoavweiss/ContentPerformancePolicy/'
      }, {
        value: 'File a bug.',
        href: 'https://github.com/yoavweiss/ContentPerformancePolicy/issues'
      }, {
        value: 'Commit history.',
        href: 'https://github.com/yoavweiss/ContentPerformancePolicy/commits/gh-pages/index.html'
      }]
    }],
  };
  </script>
</head>
<body>
  <section id='abstract'>
    <p>This specification defines a set of directives that can be used by authors
    in order to opt-out of the user-agents' slow path and apply
    self-imposed <a href="https://github.com/WICG/interventions">interventions</a> on their sites,
    in order to make sure that they are as fast as they can be, and that the user
    experience is not harmed by either first or third party content.
    User agents will modify their behavior in order to enforce these directives, and ignore "slow path" instructions by the sites.
    Applications that embed Web pages and link to them can use these directives as guarantees pointing to the lack of performance and UX
    anti-patterns in those sites, and potentially increase their ranking or exposure to users as a result.
    Content blockers may use those guarantees in order to make their decision whether to block a certain resource or not in an automatic manner.</p>
  </section>
  <section id='sotd'>
    <p>This is a <strong>work in progress</strong> and may change without any
    notices.</p>
    <p id="unstable"><strong class="redNote">Implementers SHOULD be aware that
    this document is not stable.</strong> Implementers who are not taking part
    in the discussions are likely to find the specification changing out from
    under them in incompatible ways. Vendors interested in implementing this
    document before it eventually reaches the Candidate Recommendation stage
    SHOULD join the mailing lists below and take part in the discussions.</p>
  </section>
  <section>
    <h2>Introduction</h2>
    <p>With the increasing importance of mobile, Web site performance and pleasant mobile user experience are becoming ever more critical.
    Yet the increasing complexity of today's Web application means that simply adhering to performance best practices only gets Web authors so far,
    as they have hard time dictating and controlling the performance of third party components in their pages, as well as components built
    by other teams in their organizations.    </p>

    <p>Furthermore, the increasing use of content aggregators increases the need for performance and user experience guarantees.
    Embedding applications (e.g. search engines and social networks) are reluctant to send users towards links that contain slow content
    with poor UX, as that reflects negatively on them and the perception of their applications.</p>

    <p>As a result, there's an increasing need for guaranteed performance, where the embedders can know for certain that mobile performance
    anti-patterns were avoided by the site to which it links</p>

    <p>At the same time, and probably for similar reasons, usage of content blockers have seen a dramatic rise, as users are more performance and
    bandwidth conscious, and are willing to install browser extensions and applications to help them increase performance, reduce bandwidth
    consumption and improve overall user experience.</p>

    <p>Therefore, there's an increasing need for a mechanism that would give authors control over
    their sites, and give them the opportunity to opt-out of various features of the Web platform that are inherently slow or from behaviors
    that are known to irritate users and result in bad mobile user experience. These same mechanisms can be used for guarantees for content
    embedders as well as content blockers, and enable them to make smart descisions based on the known performance characteristics of the
    content.</p>

    <p class=note title=TODO>Explain the mechanism that we're proposing</p>

    <pre class="example highlight html">
    </pre>
    <pre class="example">
    </pre>
  </section>
  <section>
    <h2>Content Performance Policy directives<h2>
    <h3>Performance best practices</h3>
    <ul>
        <li>No sync scripts</li>
        <li>Size limited inline styles</li>
        <li>Web fonts loaded using <code>font-display: swap</code></li>
        <li>Passive events only</li>
        <li>Document layout not dependent on resource download</li>
        <li>No layout thrashing - reads and writes batched</li>
    </ul>
    <h3>Resource savings</h3>
    <ul>
        <li>Lazy loading of images</li>
        <li>Prevent scripts from consuming too much CPU resources</li>
        <li>Resource size limits</li>
    </ul>
    <h3>User Experience</h3>
    <ul>
        <li>No auto playing video and audio</li>
        <li>Certain page components are limited to paint only on certain parts of the viewport</li>
        <li>No overlays</li>
        <li>No popunders</li>
    </ul>
    <p class=note title=TODO>Does this cover all the annoying things sites do?</p>

    <section>
      <h2>Processing</h2>
      <p class=note title=TODO>Add something here</p>
    </section>
    <section>
      <h2>Syntax</h2>
      <p class=note title=TODO>Can we steal everything but the directive definitions from CSP?</p>
    </section>
  </section>
  <section id="conformance">
    <p>There is only one class of product that can claim conformance to this
    specification: a <dfn>user agent</dfn>.</p>
  </section>
  <section class='appendix informative'>
    <h2>Use cases</h2>
    <p class=note title=TODO>Add use cases</p>
  </section>
  <section>
    <h2>IANA Considerations</h2>
    <p class=note title=TODO>Register headers, etc</p>
  </section>
  <section id="privacy" class="informative">
    <h2>Privacy and Security</h2>
    <p>No impact, as this reveals nothing about the user. Web sites should be careful when declaring personalized policies.</p>
  </section>
  <section class="appendix informative">
    <h2>Acknowledgments</h2>
    <p>Probably CSP</p>
  </section>
</body>
</html>
